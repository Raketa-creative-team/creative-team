/**************************************************
    => Mixins
**************************************************/
@mixin animation($name) {
    animation-name: $name;
}

@mixin flip-animation($name, $axis, $from-rot, $mid-rot, $to-rot, $from-z, $mid-z, $to-z, $from-vis, $mid-vis, $to-vis) {
    $rotate: if($axis =='X', rotateX, rotateY);

    @keyframes #{$name} {
        0% {
            transform: #{$rotate}($from-rot) translateZ($from-z);
            visibility: $from-vis;
        }

        50% {
            transform: #{$rotate}($mid-rot) translateZ($mid-z);
            visibility: $mid-vis;
        }

        100% {
            transform: #{$rotate}($to-rot) translateZ($to-z);
            visibility: $to-vis;
        }
    }
}

@mixin slide($name, $axis, $from, $to, $from-vis, $to-vis) {
    $translate: if($axis =='X', translateX, translateY);

    @keyframes #{$name} {
        from {
            transform: #{$translate}($from);
            visibility: $from-vis;
        }

        to {
            transform: #{$translate}($to);
            visibility: $to-vis;
        }
    }
}

/**************************************************
    => General Rules
**************************************************/
body {
  background-color: white;
}

.ss {
  perspective: 1000px;

  * {
    transform-style: preserve-3d;
  }

  // ======================
  // Flip animations
  // ======================
  .flipToLeft-oc,
  .flipToRight-oc,
  .flipFromLeft-oc,
  .flipFromRight-oc,
  .flipToTop-oc,
  .flipToBottom-oc,
  .flipFromTop-oc,
  .flipFromBottom-oc {
    backface-visibility: hidden;
    transform-origin: center;
  }

  $flips: (
    flipToLeft-oc:     ('Y', 0deg, -90deg, -180deg, 1px, 0, -1px, visible, hidden, hidden),
    flipFromLeft-oc:   ('Y', -180deg, -90deg, 0deg, 1px, 0, -1px, hidden, visible, visible),
    flipToRight-oc:    ('Y', 0deg, 90deg, 180deg, 1px, 0, 1px, visible, hidden, hidden),
    flipFromRight-oc:  ('Y', 180deg, 90deg, 0deg, 1px, 0, -1px, hidden, visible, visible),
    flipToTop-oc:      ('X', 0deg, -90deg, -180deg, 1px, 0, -1px, visible, hidden, hidden),
    flipToBottom-oc:   ('X', 0deg, 90deg, 180deg, 1px, 0, 1px, visible, hidden, hidden),
    flipFromBottom-oc: ('X', 180deg, 90deg, 0deg, 1px, 0, -1px, hidden, visible, visible),
    flipFromTop-oc:    ('X', -180deg, -90deg, 0deg, 1px, 0, -1px, hidden, visible, visible)
  );

  @each $name, $vals in $flips {
    .#{$name} {
      @include animation($name);
      @include flip-animation($name, nth($vals, 1), nth($vals, 2), nth($vals, 3), nth($vals, 4), nth($vals, 5), nth($vals, 6), nth($vals, 7), nth($vals, 8), nth($vals, 9), nth($vals, 10));
    }
  }

  // ======================
  // Slide animations
  // ======================
  .slideToLeft,
  .slideFromLeft,
  .slideToRight,
  .slideFromRight,
  .slideToTop,
  .slideFromTop,
  .slideToBottom,
  .slideFromBottom {
    transform-origin: center;
  }

  $slides: (
    slideToLeft:    ('X', 0, -100%, visible, hidden),
    slideFromLeft:  ('X', -100%, 0, visible, visible),
    slideToRight:   ('X', 0, 100%, visible, hidden),
    slideFromRight: ('X', 100%, 0, visible, visible),
    slideToTop:     ('Y', 0, -100%, visible, hidden),
    slideFromTop:   ('Y', -100%, 0, visible, visible),
    slideToBottom:  ('Y', 0, 100%, visible, hidden),
    slideFromBottom:('Y', 100%, 0, visible, visible)
  );

  @each $name, $vals in $slides {
    .#{$name} {
      @include animation($name);
      @include slide($name, nth($vals, 1), nth($vals, 2), nth($vals, 3), nth($vals, 4), nth($vals, 5));
    }
  }
}