/**************************************************
    => Mixins
**************************************************/
@mixin animation($name) {
  animation-name: $name;
}

@mixin flip-animation($name, $axis, $from, $mid, $to) {
  $rotate: if($axis =='X', rotateX, rotateY);

  @keyframes #{$name} {
    0% {
      transform: #{$rotate}(nth($from, 1)) translateZ(nth($from, 2));
      visibility: nth($from, 3);
    }

    50% {
      transform: #{$rotate}(nth($mid, 1)) translateZ(nth($mid, 2));
      visibility: nth($mid, 3);
    }

    100% {
      transform: #{$rotate}(nth($to, 1)) translateZ(nth($to, 2));
      visibility: nth($to, 3);
    }
  }

}

@mixin slide($name, $axis, $from, $to, $from-vis, $to-vis) {
  $translate: if($axis =='X', translateX, translateY);

  @keyframes #{$name} {
    from {
      transform: #{$translate}($from);
      visibility: $from-vis;
    }

    to {
      transform: #{$translate}($to);
      visibility: $to-vis;
    }
  }
}

/**************************************************
    => General Rules
**************************************************/
body {
  background-color: white;
}

.ss {
  perspective: 1000px;

  * {
    transform-style: preserve-3d;
  }

  // ======================
  // Flip animations
  // ======================
  .flipToLeft-oc,
  .flipToRight-oc,
  .flipFromLeft-oc,
  .flipFromRight-oc,
  .flipToTop-oc,
  .flipToBottom-oc,
  .flipFromTop-oc,
  .flipFromBottom-oc {
    backface-visibility: hidden;
    transform-origin: center;
  }


  $flips: (
    flipToLeft-oc: ('Y', (0deg, 1px, visible), (-90deg, 0, hidden), (-180deg, -1px, hidden)),
    flipFromLeft-oc: ('Y', (-180deg, 1px, hidden), (-90deg, 0, visible), (0deg, -1px, visible)),
    flipToRight-oc: ('Y', (0deg, 1px, visible), (90deg, 0, hidden), (180deg, 1px, hidden)),
    flipFromRight-oc: ('Y', (180deg, 1px, hidden), (90deg, 0, visible), (0deg, -1px, visible)),
    flipToTop-oc: ('X', (0deg, 1px, visible), (-90deg, 0, hidden), (-180deg, -1px, hidden)),
    flipToBottom-oc: ('X', (0deg, 1px, visible), (90deg, 0, hidden), (180deg, 1px, hidden)),
    flipFromBottom-oc: ('X', (180deg, 1px, hidden), (90deg, 0, visible), (0deg, -1px, visible)),
    flipFromTop-oc: ('X', (-180deg, 1px, hidden), (-90deg, 0, visible), (0deg, -1px, visible))
  );

  @each $name, $vals in $flips {
    .#{$name} {
      @include animation($name);
      @include flip-animation($name, nth($vals, 1), nth($vals, 2), nth($vals, 3), nth($vals, 4));
    }
  }

  // ======================
  // Slide animations
  // ======================
  .slideToLeft,
  .slideFromLeft,
  .slideToRight,
  .slideFromRight,
  .slideToTop,
  .slideFromTop,
  .slideToBottom,
  .slideFromBottom {
    transform-origin: center;
  }

  $slides: (
    slideToLeft: ('X', 0, -100%, visible, hidden),
    slideFromLeft: ('X', -100%, 0, visible, visible),
    slideToRight: ('X', 0, 100%, visible, hidden),
    slideFromRight: ('X', 100%, 0, visible, visible),
    slideToTop: ('Y', 0, -100%, visible, hidden),
    slideFromTop: ('Y', -100%, 0, visible, visible),
    slideToBottom: ('Y', 0, 100%, visible, hidden),
    slideFromBottom:('Y', 100%, 0, visible, visible)
  );

  @each $name, $vals in $slides {
    .#{$name} {
      @include animation($name);
      @include slide($name, nth($vals, 1), nth($vals, 2), nth($vals, 3), nth($vals, 4), nth($vals, 5));
    }
  }
}